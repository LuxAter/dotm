name: dotm
help: Personal dotfiles manager utility
version: 0.1.4

environment_variables:
  - name: DOTFILES
    required: true
    default: $HOME/dotfiles.new
    help: Path to the local dotfiles repository

commands:
  - name: bootstrap
    short: b
    help: Bootstrap the local dotfiles repository and dotm package
    group: Package
    dependencies:
      - git
      - curl

  - name: update
    short: u
    help: Check for updates to the dotm package
    dependencies:
      - curl

  - name: add
    short: a
    group: Dotfile
    help: Add new files/directories to the dotfiles

    dependencies:
      - openssl
      - tar

    args:
      - name: FILE
        required: true
        repeatable: true
        validate: file_or_dir_exists
        help: Files/Directories to import into the dotfiles repo

    flags:
      - long: --package
        short: -p
        arg: PACKAGE
        default: host/$HOSTNAME
        help: Set the package to contain the new files
      - long: --encrypt
        short: -e
        conflicts: [--copy]
        help: Encrypt the file/directories in the dotfiles
      - long: --copy
        short: -c
        conflicts: [--encrypt, --archive]
        help: Copy the dotfiles instead of using links
      - long: --archive
        short: -a
        conflicts: [--copy]
        help: Compress the file/directories into a tarball in the dotfiles
      - long: --force
        short: -f
        help: Force overwriting duplicate dotfiles
